# Стандартный workflow: Работа с одной задачей

**Дата создания:** 2026-01-22  
**Версия методологии:** vanzan01/cursor-memory-bank v0.8

---

## Описание подхода

Стандартный подход предполагает работу с **одной задачей** от начала до конца. Пользователь создает новую задачу командой `/van` и проходит с ней полный цикл методологии до завершения.

---

## Последовательность команд

```
/van → /plan → [/creative] → /build → /reflect → /archive
```

---

## Пошаговый алгоритм

### Шаг 1: Инициализация задачи через команду `/van`

**Назначение команды `/van`:**
- Инициализация Memory Bank системы
- Определение платформы
- Анализ задачи и определение уровня сложности (Level 1-4)
- Маршрутизация к соответствующему workflow

**Как использовать:**
```
/van [описание задачи]

Пример:
/van Добавить поддержку протокола IPv6 в DNS-прокси сервер
```

**Что происходит:**
1. AI анализирует задачу
2. Определяет уровень сложности:
   - **Level 1:** Quick Bug Fix (быстрое исправление бага)
   - **Level 2:** Simple Enhancement (простое улучшение)
   - **Level 3:** Intermediate Feature (промежуточная функция)
   - **Level 4:** Complex System (сложная система)
3. Обновляет `memory-bank/tasks.md` с информацией о задаче
4. Обновляет `memory-bank/activeContext.md` с текущим фокусом

**Результат:**
- Задача зарегистрирована в `memory-bank/tasks.md`
- Определен уровень сложности
- AI готов к следующему шагу

---

### Шаг 2: Планирование через команду `/plan`

**Назначение команды `/plan`:**
- Создание детального плана реализации на основе уровня сложности
- Документирование изменений, файлов для модификации, шагов реализации
- Валидация технологий (для Level 2-4)
- Определение компонентов, требующих творческой фазы (design decisions)

**Как использовать:**
```
/plan

Команда выполняется без параметров, так как AI читает задачу из memory-bank/tasks.md
```

**Что происходит:**
1. AI читает задачу из `memory-bank/tasks.md`
2. Читает контекст из `memory-bank/activeContext.md`
3. Создает детальный план реализации:
   - **Level 2:** Планируемые изменения, файлы для модификации, шаги реализации
   - **Level 3:** Комплексный план с компонентами, зависимостями, вызовами
   - **Level 4:** Поэтапный план реализации с архитектурными соображениями
4. Определяет компоненты, требующие творческой фазы
5. Обновляет `memory-bank/tasks.md` с полным планом

**Результат:**
- Детальный план реализации в `memory-bank/tasks.md`
- Определены компоненты для творческой фазы (если есть)
- План готов к выполнению или творческой фазе

---

### Шаг 3: Творческая фаза через команду `/creative` (опционально)

**Назначение команды `/creative`:**
- Исследование дизайнерских решений для компонентов, отмеченных в плане
- Генерация 2-4 вариантов решения
- Анализ плюсов и минусов каждого варианта
- Выбор и обоснование рекомендуемого подхода
- Документирование руководящих принципов реализации

**Когда использовать:**
- Только если в плане (`/plan`) были определены компоненты, требующие творческой фазы
- Обычно для Level 3-4 задач
- Для задач, требующих архитектурных решений

**Как использовать:**
```
/creative

Команда выполняется без параметров, так как AI читает компоненты из memory-bank/tasks.md
```

**Что происходит:**
1. AI читает компоненты, требующие творческой фазы, из `memory-bank/tasks.md`
2. Для каждого компонента:
   - Определяет требования и ограничения
   - Генерирует 2-4 варианта дизайна
   - Анализирует плюсы и минусы каждого варианта
   - Выбирает и обосновывает рекомендуемый подход
   - Документирует руководящие принципы реализации
3. Создает `memory-bank/creative/creative-[feature_name].md` для каждого компонента
4. Обновляет `memory-bank/tasks.md` с дизайнерскими решениями

**Результат:**
- Документы творческой фазы в `memory-bank/creative/`
- Дизайнерские решения зафиксированы
- Готово к реализации

---

### Шаг 4: Реализация через команду `/build`

**Назначение команды `/build`:**
- Систематическая реализация запланированных изменений
- Следование плану реализации и решениям творческой фазы
- Тест-ориентированный подход: тесты пишутся для всех критериев успеха и должны проходить перед завершением каждого этапа
- Обновление прогресса в Memory Bank

**Как использовать:**
```
/build

Команда выполняется без параметров, так как AI читает план из memory-bank/tasks.md
```

**Что происходит:**
1. AI проверяет завершение планирования в `memory-bank/tasks.md`
2. Для Level 3-4: проверяет наличие документов творческой фазы
3. Реализует изменения последовательно:
   - **Level 1:** Быстрое исправление бага с тестами
   - **Level 2:** Последовательная реализация изменений с тестами
   - **Level 3-4:** Поэтапная реализация с тестами для каждого этапа
4. Для каждого этапа:
   - Пишет тесты для всех критериев успеха
   - Запускает тесты и убеждается, что они проходят
   - **ВАЖНО:** Не переходит к следующему этапу, пока все тесты не пройдут
5. Обновляет `memory-bank/tasks.md` и `memory-bank/progress.md` с прогрессом

**Результат:**
- Реализованы все запланированные изменения
- Все тесты проходят
- Код готов к рефлексии

---

### Шаг 5: Рефлексия через команду `/reflect`

**Назначение команды `/reflect`:**
- Структурированная рефлексия по завершенной реализации
- Документирование извлеченных уроков и улучшений процесса
- Сравнение реализации с оригинальным планом
- Анализ того, что прошло хорошо, и вызовов

**Как использовать:**
```
/reflect

Команда выполняется без параметров, так как AI читает детали реализации из memory-bank/tasks.md
```

**Что происходит:**
1. AI проверяет завершение реализации в `memory-bank/tasks.md`
2. Если не завершена, возвращается к `/build`
3. Проводит рефлексию:
   - Сравнивает реализацию с оригинальным планом
   - Анализирует решения творческой фазы (Level 3-4)
   - Просматривает изменения кода и тестирование
4. Создает документ рефлексии:
   - **Level 1:** Краткий обзор исправления бага
   - **Level 2:** Обзор улучшения, что прошло хорошо, вызовы, уроки
   - **Level 3-4:** Комплексный обзор реализации, сравнение с планом, что прошло хорошо, вызовы, уроки, улучшения процесса, технические улучшения
5. Создает `memory-bank/reflection/reflection-[task_id].md`
6. Обновляет `memory-bank/tasks.md` со статусом рефлексии

**Результат:**
- Документ рефлексии в `memory-bank/reflection/`
- Уроки задокументированы
- Готово к архивированию

---

### Шаг 6: Архивирование через команду `/archive`

**Назначение команды `/archive`:**
- Создание комплексной архивной документации для будущей справки
- Обновление Memory Bank для следующей задачи
- Маркировка задачи как завершенной
- Сброс активного контекста

**Как использовать:**
```
/archive

Команда выполняется без параметров, так как AI читает детали задачи из memory-bank/tasks.md
```

**Что происходит:**
1. AI проверяет завершение рефлексии
2. Если не завершена, возвращается к `/reflect`
3. Создает архивный документ:
   - **Level 1:** Краткое резюме
   - **Level 2:** Базовый архивный документ с изменениями
   - **Level 3-4:** Комплексный архивный документ с метаданными, резюме, требованиями, деталями реализации, тестированием, уроками, ссылками
4. Создает `memory-bank/archive/archive-[task_id].md`
5. Обновляет Memory Bank:
   - Маркирует задачу как ЗАВЕРШЕНА в `memory-bank/tasks.md`
   - Обновляет `memory-bank/progress.md` со ссылкой на архив
   - Сбрасывает `memory-bank/activeContext.md` для следующей задачи
   - Очищает детали завершенной задачи из `memory-bank/tasks.md` (сохраняет структуру)

**Результат:**
- Архивный документ в `memory-bank/archive/`
- Задача помечена как завершенная
- Memory Bank готов к следующей задаче

---

## Когда пропускать команды

- **`/creative`** - Пропускается для Level 1-2 задач или если в плане нет компонентов, требующих творческой фазы
- **`/van`** - Можно пропустить, если задача уже зарегистрирована в `memory-bank/tasks.md`

---

## Особенности стандартного подхода

1. **Фокус на одной задаче:** В `memory-bank/tasks.md` всегда только одна активная задача
2. **Последовательное выполнение:** Все команды выполняются последовательно
3. **Полный цикл:** Задача проходит все этапы от инициализации до архивирования
4. **Чистый контекст:** После `/archive` Memory Bank готов к новой задаче

---

## Пример использования

```
/van Добавить поддержку протокола IPv6 в DNS-прокси сервер

/plan

/creative  # Если требуется

/build

/reflect

/archive
```

После выполнения `/archive` можно начать новую задачу через `/van`.

---

**См. также:**
- [Workflow со списком задач](list-workflow.md) - работа со списком задач
- [Переключение между задачами](task-switching.md) - как переключаться между задачами
- [Организация списка задач](task-list-organization.md) - структура файлов
