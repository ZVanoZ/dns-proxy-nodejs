# Задача: task20260121120400

**Номер задачи:** task20260121120400  
**Дата создания:** 2026-01-21 12:04:00  
**Статус:** (будет установлен при выполнении `/van <task_id>`)

## Описание задачи

Добавить поддержку протокола IPv6.

Глоссарий: 
* "<project-root>" - корневая директория проекта. Папка, где лежит "package.json".
* "<task-folder>" - директория описания задачи. Папка, где лежит этот файл. 


**План выполнения задачи**

1. Сбор информации.

1.1. Проанализировать какие библиотеки мы можем использовать для решения задачи.

Сохранить результат анализа в файл "<task-folder>/docs/10-analise-result.md".

1.2. Выбрать библиотеку для реализации

1.3. Собрать информацию о библиотеке сохранить в файл "<task-folder>/docs/20-lib-info.md"

2. Проектироание

2.1. На основе выбранного решения спроектировать конфигурацию "<project-root>/config/app.ini"

2.2. Спроектировать изменения классов для работы с опциями.

2.3. Спроектировать изменения для кеша запросов.

2.4. Спроектировать изменения в классе "App".

* В каком месте будем определять необходимость IPv6?
* Как назовем методы для IPv6?
* Будем ли переименоавывать методы для IPv4?
* Будем ли создавать отдельные классы для работы с IPv6 и IPv4?

2.5. Спроектировать изменения в тестах.

* Спроектировать изменения "<project-root>/config/test.config.ini"
  * Добавить конфигурацию для тестирования IPv6.
  * Принять решение, нужно ли вносить изменения для IPv4.
* Спроектировать измения в папке "<project-root>/tests/"

2.6. Спроектировать изменения, касающиеся запуска приложения.

* Нужно ли открывать еще один порт?
* Нужно ли вносить изменения для запуска через Docker и "Docker Compose"?

3. Реализация

3.1. Модифицировать конфигурацию в папке "<project-root>/config/".

3.2. Модифицировать классы приложения в папке "<project-root>/src/"

3.3. Модифицировать тесты в папке "<project-root>/tests/"

3.4. Модифицировать файлы, касающиеся запуска приложения.

3.4. Обновить документацию.

* Дополнение № 1

В методы ["sendErrorResponse", "sendSuccessResponse"] класса App при логировании нужно добавить информацию о том, на каком интерфейсе получен запрос [IP, PORT, IPv4|IPv6].

**Решение по Дополнению № 1 (PLAN):**

- Для `sendErrorResponse`:
  - При наличии распарсенного DNS-запроса извлекать `questionName` из первого вопроса (`dnsRequest.questions[0].name`).
  - Логировать `questionName` вместе с `answer` и `remoteInfo` как отдельное поле в JSON-логе.
- Для `sendErrorResponse` и `sendSuccessResponse` (на этапе BUILD):
  - Добавить helper получения информации о серверном интерфейсе на основе `socket.address()` (локальный IP, порт и стек IPv4/IPv6).
  - Логировать объект `serverInterface` (IP, PORT, family) в структуре логов, не ломая существующий формат.


## Контекстные файлы

Нет контекстных файлов.

## История статусов

(пусто - статусы будут добавляться при работе над задачей)
