# Анализ библиотек для поддержки IPv6 (UDP dual-stack)

**Задача:** task20260121120400  
**Дата:** 2026-01-30

## Цель

Выбрать способ реализации dual-stack (IPv4 + IPv6) для UDP DNS-прокси в Node.js.

## Варианты

### 1. Встроенный модуль `node:dgram`

- **Описание:** нативный API Node.js для UDP. Поддерживает `dgram.createSocket('udp4')` и `dgram.createSocket('udp6')`.
- **Плюсы:** без зависимостей, стабильный API, один порт можно биндить на оба сокета (0.0.0.0 и ::).
- **Минусы:** два сокета нужно создавать и обрабатывать вручную.
- **Версии:** доступен во всех LTS и текущих версиях Node.js.

### 2. Сторонние библиотеки (например, raw-socket, node-udp)

- **Описание:** обёртки над системными сокетами или альтернативные реализации.
- **Плюсы:** иногда дают единый «dual-stack» сокет.
- **Минусы:** дополнительная зависимость, возможны проблемы с поддержкой и лицензиями; для DNS-прокси избыточно.

## Решение

**Использовать встроенный `node:dgram`:** два сокета (udp4 и udp6), общий порт, общий обработчик сообщений. Новых зависимостей не требуется.
