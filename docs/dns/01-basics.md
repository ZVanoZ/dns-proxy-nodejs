# Основы DNS

Этот раздел объясняет базовые концепции DNS простым языком для новичков.

## Что такое доменное имя?

**Доменное имя** — это человекочитаемый адрес веб-сайта или сервиса в интернете. Например:
- `google.com`
- `github.com`
- `example.org`

Доменное имя состоит из нескольких частей, разделенных точками. Давайте разберем пример `www.example.com`:

```
www.example.com
│   │       │
│   │       └─ Домен верхнего уровня (TLD) - .com
│   └───────── Домен второго уровня - example
└───────────── Поддомен - www
```

### Компоненты доменного имени

1. **Домен верхнего уровня (TLD - Top-Level Domain)**
   - Это последняя часть доменного имени (`.com`, `.org`, `.ru`, `.net`)
   - Управляется специальными организациями
   - Примеры: `.com`, `.org`, `.ru`, `.io`

2. **Домен второго уровня (SLD - Second-Level Domain)**
   - Это уникальное имя, которое вы регистрируете
   - Пример: `example` в `example.com`

3. **Поддомен (Subdomain)**
   - Дополнительная часть перед доменом второго уровня
   - Примеры: `www`, `mail`, `api` в `www.example.com`

## Что такое IP-адрес?

**IP-адрес** (Internet Protocol address) — это числовой идентификатор устройства в сети. Существует два типа:

### IPv4 (версия 4)
- Формат: четыре числа от 0 до 255, разделенные точками
- Пример: `192.168.1.1`
- Всего возможно около 4.3 миллиарда адресов

### IPv6 (версия 6)
- Формат: восемь групп из четырех шестнадцатеричных цифр, разделенных двоеточиями
- Пример: `2001:0db8:85a3:0000:0000:8a2e:0370:7334`
- Поддерживает огромное количество адресов (практически неограниченно)

## Как работает DNS?

Процесс преобразования доменного имени в IP-адрес называется **резолвингом** (resolution). Вот упрощенная схема:

```
1. Пользователь вводит "google.com" в браузере
   ↓
2. Браузер спрашивает DNS: "Какой IP-адрес у google.com?"
   ↓
3. DNS находит IP-адрес: "142.250.185.14"
   ↓
4. Браузер подключается к серверу по IP-адресу
   ↓
5. Веб-сайт загружается
```

## Основные термины DNS

### DNS-запрос (DNS Query)
Запрос от клиента к DNS-серверу с вопросом: "Какой IP-адрес у домена X?"

### DNS-ответ (DNS Response)
Ответ от DNS-сервера с IP-адресом или другой информацией о домене.

### DNS-запись (DNS Record)
Единица информации в DNS базе данных. Существует множество типов записей:
- **A-запись** — связывает домен с IPv4 адресом
- **AAAA-запись** — связывает домен с IPv6 адресом
- **CNAME-запись** — создает алиас (псевдоним) для домена
- **MX-запись** — указывает почтовый сервер для домена
- И многие другие...

### DNS-сервер
Компьютер, который хранит информацию о доменах и отвечает на DNS-запросы.

### DNS-зона (DNS Zone)
Часть доменного пространства, управляемая одним администратором.

### TTL (Time To Live)
Время жизни записи в секундах. Определяет, как долго можно кэшировать ответ DNS.

## Типы DNS-серверов

### 1. Рекурсивный резолвер (Recursive Resolver)
- Также называется "DNS-резолвер" или "DNS-клиент"
- Получает запросы от клиентов и ищет ответы
- Примеры: DNS-серверы провайдера, Google DNS (8.8.8.8), Cloudflare DNS (1.1.1.1)

### 2. Корневой DNS-сервер (Root DNS Server)
- Хранит информацию о доменах верхнего уровня (.com, .org и т.д.)
- Всего 13 корневых серверов (буквенно обозначены от A до M)
- Это первый шаг в процессе резолвинга

### 3. TLD DNS-сервер (Top-Level Domain Server)
- Хранит информацию о доменах конкретного TLD (например, все .com домены)
- Управляется регистраторами доменов

### 4. Авторитативный DNS-сервер (Authoritative DNS Server)
- Хранит окончательную информацию о конкретном домене
- Это последний шаг в процессе резолвинга
- Обычно управляется владельцем домена или хостинг-провайдером

## Простой пример

Давайте проследим, что происходит, когда вы вводите `www.example.com` в браузере:

1. **Ваш компьютер** спрашивает рекурсивный резолвер: "Где находится www.example.com?"
2. **Рекурсивный резолвер** спрашивает корневой сервер: "Где находится .com?"
3. **Корневой сервер** отвечает: "Спроси TLD-сервер для .com"
4. **Рекурсивный резолвер** спрашивает TLD-сервер: "Где находится example.com?"
5. **TLD-сервер** отвечает: "Спроси авторитативный сервер example.com"
6. **Рекурсивный резолвер** спрашивает авторитативный сервер: "Где находится www.example.com?"
7. **Авторитативный сервер** отвечает: "IP-адрес: 93.184.216.34"
8. **Рекурсивный резолвер** передает ответ вашему компьютеру
9. **Ваш браузер** подключается к IP-адресу 93.184.216.34

## Кэширование DNS

Чтобы ускорить процесс, DNS-серверы и ваша операционная система кэшируют (сохраняют) ответы DNS на определенное время (TTL). Это означает, что повторные запросы к тому же домену выполняются мгновенно, без обращения к другим серверам.

## Полезные команды для проверки DNS

### nslookup
```bash
nslookup google.com
```
Показывает IP-адрес домена.

### dig
```bash
dig google.com
```
Более подробная информация о DNS-запросе.

### host
```bash
host google.com
```
Простой способ узнать IP-адрес домена.

## Ссылки на RFC

- **RFC 1034** — Domain Names — Concepts and Facilities — основные концепции DNS
- **RFC 1035** — Domain Names — Implementation and Specification — техническая спецификация

## Следующие шаги

Теперь, когда вы понимаете основы, переходите к изучению:
- [Структура DNS пакета](02-packet-structure.md) — как устроены запросы и ответы
- [Типы DNS записей](03-record-types.md) — различные типы записей
