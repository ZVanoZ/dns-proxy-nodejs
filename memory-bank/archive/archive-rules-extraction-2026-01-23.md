# TASK ARCHIVE: Вынос правил ведения задач в отдельный файл

## METADATA

**Задача:** Вынос правил ведения задач в отдельный файл  
**Дата начала:** 2026-01-23  
**Дата завершения:** 2026-01-23  
**Уровень сложности:** Level 2 (Simple Enhancement)  
**Статус:** ✅ Завершено и заархивировано  
**Методология:** vanzan01/cursor-memory-bank v0.8

---

## SUMMARY

Рефакторинг структуры документации задач: вынос всех правил, примечаний и шаблонов из `docs/tasks/index.md` в отдельный файл `docs/tasks/rules.md` для улучшения читаемости и структурированности документации.

**Ключевой результат:**
- Создан файл `docs/tasks/rules.md` со всеми правилами работы с задачами
- Упрощен файл `docs/tasks/index.md` до ссылки на правила и списка задач
- **Критически важно:** Добавлено явное указание для Cursor AI о необходимости сначала читать правила из `rules.md`

**Метрики:**
- Сокращение размера `index.md`: с 133 строк до 21 строки (84% сокращение)
- Улучшение читаемости: `index.md` теперь содержит только список задач
- Сохранение функциональности: все правила доступны в `rules.md`

---

## REQUIREMENTS

### Основные требования

1. **Вынести все правила, примечания и шаблоны в `docs/tasks/rules.md`:**
   - Раздел "Правила работы с задачами" (формат номера задачи, структура директории, статусы задач, алгоритмы работы команд)
   - Раздел "Шаблон строки задачи" (шаблон, компоненты, примеры, примечания)
   - Примечания в конце файла (о файле, добавление новых задач, обновление статусов, сортировка задач)

2. **Добавить ссылку на `rules.md` в начале `docs/tasks/index.md`:**
   - Разместить ссылку в самом начале файла (после заголовка и метаданных)
   - **КРИТИЧЕСКИ ВАЖНО:** Указать, что Cursor AI должен сначала считывать правила из `rules.md` при работе с задачами
   - Сделать ссылку заметной и понятной

3. **Оставить в `docs/tasks/index.md` только:**
   - Заголовок и метаданные
   - Ссылку на `rules.md`
   - Раздел "Список задач"

### Критически важное требование

- Cursor AI должен сначала считывать правила из `rules.md` при работе с задачами
- Это должно быть явно указано в `docs/tasks/index.md` в виде заметного предупреждения
- Ссылка должна быть размещена в самом начале файла (после заголовка и метаданных)

---

## IMPLEMENTATION

### Этап 1: Создание файла `docs/tasks/rules.md`

**Выполнено:**
- Создан новый файл `docs/tasks/rules.md`
- Добавлен заголовок "Правила работы с задачами" и описание
- Перенесены все правила работы с задачами:
  - Формат номера задачи
  - Структура директории задачи
  - Статусы задач (CREATED, OPENED, REOPENED, PLAN, PLANED, BUILD, BUILDED, REFLECT, REFLECTED, ARCHIVE, ARCHIVED)
  - Алгоритмы работы команд (`/van`, `/plan`, `/build`, `/reflect`, `/archive`)
- Перенесен шаблон строки задачи с компонентами и примерами
- Перенесены все примечания (о файле, добавление новых задач, обновление статусов, сортировка задач)
- Проверена структура и форматирование

**Структура файла `docs/tasks/rules.md`:**
- Заголовок: "Правила работы с задачами"
- Раздел "Формат номера задачи"
- Раздел "Структура директории задачи"
- Раздел "Статусы задач"
- Раздел "Алгоритм работы команды `/van <task_id>`"
- Раздел "Алгоритм работы команды `/plan`"
- Раздел "Алгоритм работы команды `/build`"
- Раздел "Алгоритм работы команды `/reflect`"
- Раздел "Алгоритм работы команды `/archive`"
- Раздел "Шаблон строки задачи"
- Раздел "Примечания"

### Этап 2: Обновление файла `docs/tasks/index.md`

**Выполнено:**
- Добавлена заметная ссылка на `rules.md` в начале файла (после заголовка и метаданных)
- **КРИТИЧЕСКИ ВАЖНО:** Добавлено явное указание для Cursor AI:
  ```markdown
  **⚠️ ВАЖНО ДЛЯ CURSOR AI: При работе с задачами ОБЯЗАТЕЛЬНО сначала прочитайте правила из файла [rules.md](rules.md)**
  ```
- Удален раздел "Правила работы с задачами"
- Удален раздел "Шаблон строки задачи"
- Удалены примечания в конце файла
- Оставлен только раздел "Список задач"
- Проверено, что файл содержит только необходимые элементы

**Структура файла `docs/tasks/index.md` после обновления:**
- Заголовок: "Индексный указатель задач проекта dns-proxy-nodejs"
- Метаданные (дата создания, версия методологии)
- **ВАЖНО:** Ссылка на `rules.md` с указанием для Cursor AI
- Раздел "Список задач"

---

## TESTING

### Проверка структуры файлов

✅ **Проверка файла `docs/tasks/rules.md`:**
- Файл создан и содержит все правила
- Структура соответствует требованиям
- Форматирование сохранено
- Все разделы присутствуют

✅ **Проверка файла `docs/tasks/index.md`:**
- Файл обновлен и содержит только необходимые элементы
- Ссылка на `rules.md` размещена в начале файла
- Явное указание для Cursor AI присутствует
- Раздел "Список задач" сохранен

### Проверка функциональности

✅ **Проверка ссылок:**
- Ссылка на `rules.md` работает корректно
- Все правила доступны в `rules.md`

✅ **Проверка читаемости:**
- `index.md` стал более компактным и сфокусированным
- Правила легко найти в `rules.md`
- Структура интуитивно понятна

---

## LESSONS LEARNED

### 1. Важность явных указаний для AI

**Урок:** Критически важно явно указывать AI, какие файлы нужно читать первыми.

**Применение:**
- Использование визуальных маркеров (эмодзи, жирный шрифт) помогает привлечь внимание
- Размещение важной информации в начале файла повышает вероятность её прочтения
- Явные указания должны быть заметными и понятными

### 2. Принцип разделения ответственности

**Урок:** Разделение правил и данных (список задач) улучшает читаемость и поддерживаемость.

**Применение:**
- Каждый файл должен иметь четкую и понятную роль
- Разделение облегчает навигацию и поиск нужной информации
- Это соответствует принципам хорошей архитектуры документации

### 3. Структурирование документации

**Урок:** Хорошая структура документации критически важна для работы с AI.

**Применение:**
- Четкое разделение на файлы с понятными названиями улучшает понимание
- Ссылки между файлами должны быть явными и заметными
- Структура должна быть интуитивно понятной

### 4. Рефакторинг документации

**Урок:** Рефакторинг документации так же важен, как рефакторинг кода.

**Применение:**
- Улучшение структуры документации может значительно повысить продуктивность работы
- Важно сохранять всю информацию при рефакторинге
- Метрики (сокращение размера файла) помогают оценить результат

---

## REFERENCES

### Связанные документы

- **Рефлексия:** `memory-bank/reflection/reflection-rules-extraction-2026-01-23.md`
- **План реализации:** `memory-bank/tasks.md` (раздел "План реализации: Вынос правил ведения задач в отдельный файл")

### Созданные файлы

- `docs/tasks/rules.md` - файл с правилами работы с задачами (122 строки)
- `docs/tasks/index.md` - упрощенный индексный файл (21 строка, было 133 строки)

### Обновленные файлы

- `docs/tasks/index.md` - упрощен до ссылки на правила и списка задач

---

## TECHNICAL DETAILS

### Структура файлов после рефакторинга

**`docs/tasks/rules.md`:**
- Все правила работы с задачами
- Все примечания и шаблоны
- Полная документация по работе с задачами

**`docs/tasks/index.md`:**
- Заголовок и метаданные
- Ссылка на `rules.md` с указанием для Cursor AI
- Список задач

### Метрики

- **Сокращение размера `index.md`:** с 133 строк до 21 строки (84% сокращение)
- **Улучшение читаемости:** `index.md` теперь содержит только список задач
- **Сохранение функциональности:** все правила доступны в `rules.md`

### Критически важные элементы

- Явное указание для Cursor AI в начале `index.md`
- Размещение ссылки на `rules.md` в самом начале файла
- Использование визуальных маркеров для привлечения внимания

---

## CONCLUSION

Задача выполнена успешно. Рефакторинг документации улучшил структуру и читаемость файлов. Критически важное требование о необходимости сначала читать правила из `rules.md` было явно указано в `index.md`. Все правила, примечания и шаблоны были полностью перенесены без потери информации.

**Статус:** ✅ Задача завершена и заархивирована
